{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import LandingPage from'./components/LandingPage';import Login from'./components/Login';import SignUp from'./components/SignUp';import EventList from'./components/EventList';import ManagerDashboard from'./components/ManagerDashboard';import Navbar from'./components/NavBar';import ProtectedRoute from'./components/protectedRoute';import EventDetails from'./components/EventDetails';import EditEvent from'./components/EditEvent';import api from'./api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[isAuthenticated,setIsAuthenticated]=useState(null);// Start with `null` to indicate loading\n// Check authentication status\nuseEffect(()=>{const checkAuth=async()=>{try{const response=await api.get('/auth/check');console.log('Auth check response:',response.data.isAuthenticated);// Logs response\nsetIsAuthenticated(response.data.isAuthenticated);// Updates the state\n}catch(error){console.error('Auth check error:',error);// Logs errors\nsetIsAuthenticated(false);// Fallback to unauthenticated\n}};checkAuth();},[]);// Show a loader or placeholder during the authentication check\nif(isAuthenticated===null){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/manager-dashboard\",replace:true}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/events\",element:/*#__PURE__*/_jsx(EventList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/manager-dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{isAuthenticated:isAuthenticated,children:/*#__PURE__*/_jsx(ManagerDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/events/:id\",element:/*#__PURE__*/_jsx(EventDetails,{})}),/*#__PURE__*/_jsx(Route,{path:\"/edit-event/:id\",element:/*#__PURE__*/_jsx(EditEvent,{})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","LandingPage","Login","SignUp","EventList","ManagerDashboard","Navbar","ProtectedRoute","EventDetails","EditEvent","api","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","checkAuth","response","get","console","log","data","error","children","path","element","to","replace"],"sources":["/Users/ahamedfoisal/Documents/GitHub/final-project-ahamedfoisal/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport LandingPage from './components/LandingPage';\nimport Login from './components/Login';\nimport SignUp from './components/SignUp';\nimport EventList from './components/EventList';\nimport ManagerDashboard from './components/ManagerDashboard';\nimport Navbar from './components/NavBar';\nimport ProtectedRoute from './components/protectedRoute';\nimport EventDetails from './components/EventDetails';\nimport EditEvent from './components/EditEvent';\nimport api from './api';\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = useState(null); // Start with `null` to indicate loading\n\n  // Check authentication status\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await api.get('/auth/check');\n        console.log('Auth check response:', response.data.isAuthenticated); // Logs response\n        setIsAuthenticated(response.data.isAuthenticated); // Updates the state\n      } catch (error) {\n        console.error('Auth check error:', error); // Logs errors\n        setIsAuthenticated(false); // Fallback to unauthenticated\n      }\n    };\n    checkAuth();\n  }, []);\n\n  // Show a loader or placeholder during the authentication check\n  if (isAuthenticated === null) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <Router>\n      <Navbar />\n      <Routes>\n        {/* Redirect `/` to Manager Dashboard if authenticated, otherwise to Login */}\n        <Route\n          path=\"/\"\n          element={\n            isAuthenticated ? <Navigate to=\"/manager-dashboard\" replace /> : <Login />\n          }\n        />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/signup\" element={<SignUp />} />\n        <Route path=\"/events\" element={<EventList />} />\n        <Route\n          path=\"/manager-dashboard\"\n          element={\n            <ProtectedRoute isAuthenticated={isAuthenticated}>\n              <ManagerDashboard />\n            </ProtectedRoute>\n          }\n        />\n        <Route path=\"/events/:id\" element={<EventDetails />} />\n        <Route path=\"/edit-event/:id\" element={<EditEvent />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}